{"version":3,"sources":["27-2-2022/App.js","index.js"],"names":["initialUser","name","age","skills","email","App","useState","users","setUsers","isLoading","setLoading","user","setUser","isEditing","setIsEditing","useEffect","fetch","then","res","json","catch","err","console","log","finally","onUserInputChange","event","inputName","value","target","newUser","type","onChange","onClick","split","id","method","body","JSON","stringify","headers","data","userIdx","findIndex","usr","splice","map","idx","text","updateUsers","filter","join","onEdit","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.efab60e8.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nconst initialUser = {\r\n    name: \"\",\r\n    age: \"\",\r\n    skills: \"\",\r\n    email: \"\"\r\n}\r\nconst App = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [isLoading, setLoading] = useState(false);\r\n  const [user, setUser] = useState(initialUser);\r\n  const [ isEditing, setIsEditing ] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    fetch(\"http://localhost:3001/users\")\r\n      .then((res) => res.json())\r\n      .then((users) => {\r\n        setUsers(users);\r\n      })\r\n      .catch((err) => console.log(\"Error\", err))\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const onDelete = (id) => {\r\n    fetch(\"http://localhost:3001/users/\" + id, {\r\n        method: \"DELETE\"\r\n    })\r\n      .then((res) => res.text())\r\n      .then((res) => {\r\n          const updateUsers = users.filter((user) => user.id !== id);\r\n          setUsers(updateUsers)\r\n          console.log(res);\r\n      })\r\n      .catch((err) => console.log(\"Error\", err))\r\n     \r\n  };\r\n\r\n  const onUserInputChange = (event, inputName) => {\r\n    const value = event.target.value;\r\n    const newUser = {\r\n        ...user\r\n    }\r\n    newUser[inputName] = value;\r\n    setUser(newUser)\r\n  }\r\n\r\n  const onSave = () => {\r\n      const newUser = {...user}\r\n      newUser.skills = user.skills.split(\",\")\r\n\r\n    fetch(\"http://localhost:3001/create-user\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify(newUser),\r\n        headers: {\r\n            'Content-type': 'application/json'\r\n        }\r\n    })\r\n    .then((res) => res.json())\r\n    .then((res) => {\r\n        const user = res.data.user;\r\n        setUsers([...users, user])\r\n        setUser(initialUser)\r\n        console.log(res);\r\n    })\r\n    .catch((err) => console.log(\"Error\", err))\r\n\r\n  }\r\n\r\n  const onEdit = (user) => {\r\n      setIsEditing(true)\r\n      setUser({\r\n          ...user,\r\n            skills: user.skills.join()\r\n        })\r\n  }\r\n\r\n  const onUpdateUser = () => {\r\n    const newUser = {...user}\r\n    console.log(user)\r\n    newUser.skills = user.skills.split(\",\")\r\n    fetch(\"http://localhost:3001/users/\" + user.id, {\r\n        method: \"PATCH\",\r\n        body: JSON.stringify(newUser),\r\n        headers: {\r\n            'Content-type': 'application/json'\r\n        }\r\n    })\r\n    .then((res) => res.json())\r\n    .then((res) => {\r\n        const user = res.data.user;\r\n        const userIdx = users.findIndex((usr) => usr.id === user.id)\r\n        users.splice(userIdx, 1, user)\r\n        setUsers([...users])\r\n        setUser(initialUser)\r\n        setIsEditing(false);\r\n        console.log(res);\r\n    })\r\n    .catch((err) => console.log(\"Error\", err))\r\n  }\r\n \r\n  if (isLoading) {\r\n    return (\r\n      <div>\r\n        <h1>Loading...</h1>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  console.log(user)\r\n  return (\r\n    <div>\r\n      <h1>Users Dashboard</h1>\r\n\r\n        <div>\r\n            <p>Name: <input type=\"text\" value={user.name} onChange={(event) => onUserInputChange(event, 'name')} /></p>\r\n            <p>Age: <input type=\"number\" value={user.age} onChange={(event) => onUserInputChange(event, 'age')} /></p>\r\n            <p>Email: <input type=\"email\" value={user.email} onChange={(event) => onUserInputChange(event, 'email')} /></p>\r\n            <p>Skills (Please add Comma seperated Skills): <input type=\"text\" value={user.skills} onChange={(event) => onUserInputChange(event, 'skills')} /></p>\r\n            {isEditing ? <button onClick={onUpdateUser}>Update</button>: <button onClick={onSave}>Save</button>}\r\n        </div>\r\n\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Name</th>\r\n            <th>Email</th>\r\n            <th>Age</th>\r\n            <th>Skills</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {users.map((user, idx) => {\r\n            return (\r\n              <tr key={idx}>\r\n                <td>{user.id}</td>\r\n                <td>{user.name}</td>\r\n                <td>{user.email}</td>\r\n                <td>{user.age}</td>\r\n                <td>{user.skills}</td>\r\n                <td>\r\n                    <button onClick={() => onDelete(user.id)}>Delete</button>\r\n                    <button onClick={() => onEdit(user)}>Edit</button>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n// import App from './life-cycle-functional-component';\nimport App from \"./27-2-2022/App\"\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}